{%extends "base.html"%}

{%block content%}

<div class="w-100 container-fluid">

<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th style="width: 2.5%;"class="mx-0 px-0"scope="col">Name</th>
            <th style="width: 2.5%;"class="mx-0 px-0"scope="col">Points</th>
            {%for day in calendar%}
            <th style="width: 2.5%;" class="text-center mx-0 px-0"scope="col">
                <p class="d-none d-xl-table-cell">{{day.date.strftime("%a")}}</p>
                <br class="d-none d-xl-block">
                <p class="d-none d-lg-table-cell">{{day.date.strftime("%d")}}</p>
            </th>
            {%endfor%}
        </tr>
    </thead>

<tbody>
    {%for u in users%}
    <tr>
        <td class="mx-0 px-0">{{u.last}}</td>
        <td class="text-center mx-0 px-0">{{u.points}}</td>
        {%for day in calendar%}
        <td class="mx-0 px-0 rounded">
            {%if day.assigned['DO']==u.id%}
            <p class="text-center">.</p>
            {%endif%}
            {%if bids[u.id][day.id]>=0%}
            <input class="d-none"type="text" value="{{bids[u.id][day.id]}}"></input>
            {%else%}
            None
            {%endif%}
        </td>
        {%endfor%}

    </tr>
    {%endfor%}
</tbody>
</table>

</div>

<script>

function colorCells() {
        $(this).removeClass('bg-danger bg-success');
        if ($(this).children("input").val() == 0) {
            $(this).addClass("bg-danger");
        }
        else if ($(this).children("input").val() == 1) {
        }
        else if ($(this).children("input").val() == 2) {
            $(this).addClass("bg-success");
        }
    }

    $(document).ready(function () {
        $("td").each(colorCells);
        // $('.d-none').removeClass("d-none")
    });

    // $('td').hover(function(){
    //     $(this).toggleClass('shadow mb-5')
    // });

</script>

{%endblock%}